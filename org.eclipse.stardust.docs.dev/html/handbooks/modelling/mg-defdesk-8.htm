<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">

<link rel="STYLESHEET" href="../../styles/carnot.css"
	charset="ISO-8859-1" type="text/css">
<title>Specifying Data Mappings</title>
<script language="JavaScript" src="../../styles/naviLine.js"
	type="text/javascript"></script>
</head>
<body>
<script language="JavaScript" type="text/javascript">
<!--
	writeNavigation("Working with Data Paths","mg-defdesk-7.htm","mg-defdesk-9.htm",
		"../handbooks.htm","Developer Handbook",
		"mg-preface.htm","Modeling Guide",
		"mg-modeler-preface.html","The Process Workbench");
 -->
</script>

<h1>Specifying Data Mappings</h1>
<h2>Contents</h2>
<p>In this section, we will see how to create, modify and remove the
Data Mappings. We will also cover the Data Mapping Connections and
Automatic Completion of Data Mappings.</p>
<ul>
	<li><a href="#Create">Creating Data Mappings</a></li>
	<li><a href="#Data_Map_Pane">The Data Mapping Pane</a></li>
	<li><a href="#automatic">Automatic Completion of Data Mappings</a></li>
	<li><a href="#Connect">Data Mapping Connection</a></li>
	<li><a href="#edit">Editing Data Mappings</a></li>
	<li><a href="#Delete">Deleting Data Mappings</a></li>
	<li><a href="#PI">Data Mappings in Process Interface Context</a></li>
</ul>

<h2 id="Create">Creating Data Mappings</h2>
<p>To create a data mapping for an activity:</p>
<ol>
	<li>Open the properties dialog of the activity.</li>
	<li>Select <strong>In Data Mappings</strong> on the left side of
	the dialog.</li>
	<li>Choose an application context in the data mapping pane. Possible 
	contexts are:
	<ul>
		<li><strong>default</strong>: default context.<br>
		E.g. for manual activities (refer to section 
		<a href="activities/manual-activities.html#maps">Data Mappings</a> of chapter
		<a href="activities/manual-activities.html">Manual Activities</a> for details)</li>
		<li><strong>engine</strong>: engine context</li>
		<li><strong>application</strong>: Noninteractive application context
		 - for noninteractive applications</li>
		<li>application specific contexts for interactive applications:
		<ul>
			<li><strong>externalWebApp</strong>: External Web application context, e.g.:
         <p class="image"><img src="images/data-map-webapp.png" alt="Application Context"></p></li>
			<li><strong>jfc</strong>: JFC application context, e.g.:
         <p class="image"><img src="images/data-map-jfc.png" alt="Application Context"></p></li>
			<li><strong>jsf</strong>: JSF application context</li>
			<li><strong>jsp</strong>: JSP application context, e.g.:
         <p class="image"><img src="images/data-map-jsp.png" alt="Application Context"></p></li>
		</ul></li>
      <li><strong>processInterface</strong>: process interface context, e.g.:
      <p class="image"><img src="images/data-map-procint.png" alt="Application Context"></p>
      Refer to section <a href="#PI">Data Mappings in Process Interface Context</a>
      for details.</li>
	</ul></li>
	<li>Select <strong>Add</strong>.
	<p class="image"><img src="images/add-data-mapping.png"
	alt="Add an In Data Mapping"> <br>
	<strong>Figure:</strong> Add an In Data Mapping</p></li>
	<li>Edit the data mapping details in the details pane.</li>
</ol>
<h2 id="Data_Map_Pane">The Data Mapping Pane</h2>
<p>Data mappings are managed in the <strong>In Data
Mappings</strong> and <strong>Out Data Mappings</strong> panes of the activity
properties dialog.</p>

<p>We will cover only In data mappings here; Out data mappings are
treated similarly. The <strong>In Data Mappings</strong> pane is
structured to have an overview tree of the data mappings on the left
side and a details pane for the chosen data mapping on the right side.
Depending on the type of the chosen data mapping, the details pane will
show editing controls for:</p>
<ul>
	<li>The data accessor</li>
	<li>The application accessor (non-interactive applications and JFC
	and JSF application contexts)</li>
	<li>The ID (interactive application contexts except JFC and JSF
	context) - <br>
	Please note that IDs containing hyphens, blanks or dots and IDs
	starting with digits are not supported.</li>
</ul>
<p class="small">&nbsp;</p>
<p class="image"><a href="images/mg-datamapping-pane_orgSize.png" target="_blank">
<img src="images/mg-datamapping-pane.png"
	alt="Structure of the In Data Mapping Pane"></a><br>
<strong>Figure:</strong> Structure of the In Data Mapping Pane</p>

<p><span class="Stil1">In the data mapping pane you can
choose a context to add.</span></p>
<p class="small">&nbsp;</p>
<p class="image"><a href="images/mg-datamapping-context_orgSize.png" target="_blank">
<img src="images/mg-datamapping-context.png"
	alt="List of Application Context Types"></a><br>
<strong>Figure:</strong> List of Application Context Types</p>
<p>Please refer to the section <a href="../../concepts/workflow-basics/mg-basics-8.htm#context">Application
Contexts for Data Mappings</a> of the chapter <a href="../../concepts/workflow-basics/mg-basics-8.htm">Workflow
Data</a> for detailed information on the context provided for data mappings.</p>

<h2 id="automatic">Automatic Completion of Data Mappings</h2>
<p>When an input or output mapping is created for an activity with
an application attached, the data mapping is automatically connected to
the first input/output access point, whose type matches the data of the
data mapping and which is not connected via a data mapping already.</p>
<p>If no matching access point according to these rules is
available, no completion occurs.</p>
<h3>Priority of Preset Access Point</h3>
<p>The preset access point of the data mapping follows these rules:</p>
<ul>
	<li>Parameters are preferred to methods.</li>
	<li>Methods of the concrete Java class are preferred to methods of
	superclasses.</li>
</ul>
<!--  <p>For example, an activity attached to an application having a completion method <tt>notify()</tt>,
which returns a string value, -->
<h2 id="Connect">Data Mapping Connection</h2>
<p>After data mappings are created they render automatically in the
<strong>Process Workbench</strong> as connections between the activity
symbol and the data symbol. There is at most one data mapping connection
between an activity and a data, summarizing all existing data mappings
for them. The data mapping direction is indicated by arrows:</p>
<ul>
	<li>If there is an In data mapping to the activity the connection
	is labeled with an arrow to the activity.</li>
	<li>If there is an Outdata mapping to the data the connection is
	labelled with an arrow to the data.</li>
	<li>If there are data mappings for both directions, both arrows
	are displayed.</li>
</ul>
<p class="image"><img src="images/mg-defdesk-29.jpg" alt=""> <br>
<strong>Figure:</strong> An In Data Mapping Connection</p>
<p>There is a shortcut to create a first data mapping between an
activity and a data: in the diagram containing the activity and the data
element you can map the data as the activity's input/output. To do this,
proceed as follows:</p>
<ul>
	<li>Right-click the data.</li>
	<li>Select <strong>Connect</strong> in the context menu.</li>
	<li>Click the activity.</li>
</ul>
<p class="image"><img src="images/mg-connect-data-mapping.png"
	alt=""> <br>
<strong>Figure:</strong> Create a In Data Mapping</p>
<p>An In data mapping is created, visualized by a data mapping
connection.</p>
<p>If you have created at least one link type with source type <strong>Data</strong>
and target type <strong>Activity</strong>, you have the choice to select
between these custom link types and the standard data mapping connection
type. Please refer to chapter <a href="mg-defdesk-14.htm">Specifying
Arbitrary Link Types</a> for information on custom link types.</p>
<p class="image"><img
	src="images/mg-connect-data-mapping-select.png" alt=""> <br>
<strong>Figure:</strong> Select the Link Type for Data Mapping<br/>
&nbsp;</p>
<p>To create an Out data mapping, this works the other way around:</p>
<ul>
	<li>Right-click the activity first.</li>
	<li>Select <strong>Connect</strong> in the context menu.</li>
	<li>Click the data.</li>
</ul>
<p class="image"><img src="images/mg-connect-out-data-mapping.png"
	alt=""> <br>
<strong>Figure:</strong> Create an Out Data Mapping</p>
<h2 id="edit">Editing Data Mappings</h2>
<p>Data mappings can be modified by selecting their connection
symbol in the diagram and then editing its properties in the details
pane or by opening the properties dialog of the corresponding activity.</p>
<h3>Data Mapping Properties Dialog</h3>
<p>A possibility to manage all data mappings between an activity and
a data is the data mapping properties dialog. It can be opened by
double-clicking on a data mapping connection. It looks exactly like the
data mapping panes in the activity properties dialog, except the data
cannot be chosen.</p>
<p class="image"><img src="images/mg-datamapping-props.png"
	alt="Data Mapping Properties Dialog"> <br>
<strong>Figure:</strong> Data Mapping Properties Dialog</p>
<ul>
   <li><a href="#apt">Setting Access Points</a></li>
   <li><a href="#aptpath">Setting Access Point Paths</a></li>
   <li><a href="#ord">Changing the Order of Data Mappings</a></li>
</ul>
<h3 id="apt">Setting Access Points</h3>
<p>Access points are named parameters to set or get values associated with a model element
at runtime. Refer to section
<a href="../../concepts/workflow-basics/mg-basics-8.htm#accessPoints">Access Points</a>
of chapter
<a href="../../concepts/workflow-basics/mg-basics-8.htm">Workflow Data</a>
for details on the concept of using access points in Stardust.</p>
<p class="image"><img src="images/access-point-select.png"
   alt="Access Point Selection"> <br>
<strong>Figure:</strong> Selecting an access point</p>
<p>Access Points can be used as values from events, e.g. the caught exception from an exception event:</p>
<p class="image"><img src="images/access-point-event.png"
   alt="Event Access Point Example"> <br>
<strong>Figure:</strong> Event Access Point Example</p>
<h3 id="aptpath">Setting Access Point Paths</h3>
<p>Depending on the type of the access point an input or output access point path can
be applied to it.</p>
<ul>
   <li>An Input Access Point Path accepts exactly one Java object as a parameter.
   The execution semantics is provided by the underlying data type.</li>
   <li>An OutPut Access Point Path executes on the access point according to
   the semantics of the underlying data type.</li>
</ul>
<h4>Examples</h4>
<p>The following screenshot shows an example usage for getting the label of a
document version access point:</p>
<p class="image"><img src="images/access-point-path-ex1.png"
   alt="Access Point Path Example"> <br>
<strong>Figure:</strong> Document Version Label Access Point Path example</p>
<p>The following screenshot shows an example usage for executing a Java method on an access point:</p>
<p class="image"><img src="images/access-point-path-ex-struct.png"
   alt="Access Point Path Example"> <br>
<strong>Figure:</strong> Java Method Access Point Path example</p>
<h3 id="ord">Changing the Order of Data Mappings</h3>
<p>All data mappings are executed in the order specified in the
model. Data mappings may be reordered by selecting a data mapping in the
data mapping properties pane in the properties dialog of the activity
and clicking the <strong>Move Up</strong> or <strong>Move Down</strong>
button.</p>
<p class="image"><img src="images/datamapping-order.png"
   alt="Data Mapping Order"> <br>
<strong>Figure:</strong> Changing the order of data mappings</p>
<h2 id="Delete">Deleting Data Mappings</h2>

<p>A data mapping can be deleted by</p>
<ul>
	<li>selecting it in the diagram view and choosing <strong>Delete</strong>
	from the pop-up menu. To delete only the symbol, choose <strong>Delete
	Symbol </strong>or</li>
	<li>by selecting it in the data mapping properties pane of the
	activity's properties dialog and pressing the <strong>Delete</strong>
	button.</li>
</ul>

<h2 id="PI">Data Mappings in Process Interface Context</h2>
<p>The process interface data mapping is required when one model is referring to another model.
Suppose the referred subprocess has IN parameters defined and it returns the result. In this case,
the called process should know the IN and OUT parameters. So if the referred process has exposed 
the parameters then you need to provide the data mappings in the process interface context.</p>
<p>Note that the data type specified in the formal parameters should match with the data type specified in the consumer model. 
For example, 
you have defined structure data type in the 
provider model. To access the same structured data in the consumer model, you need to drag and drop the
structured data and reference through the data mappings. For more information on how to drag and drop referenced 
elements, please refer to the section <a href="../modelling/mg-registry.html#drag">Dragging and Dropping 
the Referenced Elements</a> of the <a href="../modelling/mg-registry.html">External Model Resources</a> chapter.
For more information, you can also refer to the chapter <a href="../modelling/model-views/views-outline.html"> Outline View </a>.
</p>
<p>Open the Property page of the referred subprocess activity in the consumer model and click on <strong>In Data Mappings</strong></p>
<p class="image"><img src="images/refindatamapping.png" alt="Subprocess In Data Mappings"></img>
<br><strong>Figure:</strong> In Data Mapping</p>

<p>Select the processInterface context and click the Add button.</p>
<p class="image"><img src="images/refaddinterface.png" alt="In Data Mapping - Process Interface Context"></img>
<br><strong>Figure:</strong> In Data Mapping - Process Interface Context</p>


<p>Specify the parameters and click on Apply.</p>
<p class="image"><img src="images/intparam.png" alt="Process Interface Context - Parameters"></img>
<br><strong>Figure:</strong> Process Interface Context - Parameters</p>

<p>Similarly, you can provide the out data mappings.</p>

<script language="JavaScript" type="text/javascript">
<!-- 
writeFooter(); 
-->
</script>
</body>
</html>
